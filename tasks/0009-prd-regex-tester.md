# PRD: 정규식(RegEx) 테스트 & 라이브러리

**작성일**: 2025-11-21
**상태**: 준비 완료

---

## 📋 개요

이메일, 전화번호, 비밀번호, URL 등 프로젝트에서 자주 사용하는 정규식(Regular Expression)을 테스트하고 관리하는 도구입니다. 정규식 문법을 외우지 않아도, 사전 정의된 패턴을 사용하거나 테스트하여 올바른지 빠르게 확인할 수 있습니다.

---

## 🎯 목표

1. 사전 정의된 정규식 라이브러리 제공
2. 정규식 패턴 테스트 (입력 문자열이 매칭되는지 확인)
3. 정규식 설명 (각 패턴의 용도 및 규칙)
4. 정규식 생성기 (사용자 정의 패턴 작성 도움)
5. 팀이 일관된 유효성 검사 규칙 사용

---

## 👥 사용자 스토리

**AS A** 프론트엔드 개발자
**I WANT TO** 이메일 입력 검증을 위한 정규식을 빠르게 찾아 사용
**SO THAT** 폼 유효성 검사를 쉽게 구현할 수 있습니다.

**AS A** 백엔드 개발자
**I WANT TO** 정규식이 내 입력값과 올바르게 매칭되는지 테스트
**SO THAT** 로직 오류를 사전에 발견할 수 있습니다.

**AS A** 데이터 처리 엔지니어
**I WANT TO** 복잡한 로그 패턴을 정규식으로 파싱하는 것을 테스트
**SO THAT** 파싱 로직을 신뢰하고 적용할 수 있습니다.

**AS A** 팀 리더
**I WANT TO** 팀이 사용하는 정규식을 한 곳에서 관리
**SO THAT** 중복과 오류를 줄이고 일관성을 유지합니다.

---

## ✅ 기능 요구사항

### 9.1 사전 정의된 정규식 라이브러리

#### 기본 검증 패턴

1. **이메일**
   ```
   /^[^\s@]+@[^\s@]+\.[^\s@]+$/
   설명: 기본 이메일 형식 (name@domain.com)
   테스트: user@example.com ✅, invalid.email ❌
   ```

2. **전화번호**
   ```
   한국 (010-1234-5678):
   /^01[0-9]-\d{3,4}-\d{4}$/

   미국 ((123) 456-7890):
   /^\(\d{3}\) \d{3}-\d{4}$/
   ```

3. **비밀번호** (최소 8자, 대문자, 소문자, 숫자 포함)
   ```
   /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/
   ```

4. **URL**
   ```
   /^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/
   설명: HTTP, HTTPS, FTP URL
   ```

5. **IP 주소**
   ```
   IPv4:
   /^(\d{1,3}\.){3}\d{1,3}$/

   IPv6:
   /^([\da-f]{0,4}:)+[\da-f]{0,4}$/i
   ```

6. **신용카드** (숫자, 4자리마다 하이픈)
   ```
   /^\d{4}-\d{4}-\d{4}-\d{4}$/
   ```

7. **주민등록번호** (한국)
   ```
   /^\d{6}-[1-4]\d{6}$/
   ```

8. **파일명**
   ```
   허용: 영문, 숫자, 하이픈, 언더스코어
   /^[a-zA-Z0-9_-]+\.[a-zA-Z0-9]+$/
   ```

9. **Slug** (URL 친화적 문자열)
   ```
   /^[a-z0-9]+(?:-[a-z0-9]+)*$/
   ```

10. **한글만**
    ```
    /^[가-힣]+$/
    ```

### 9.2 정규식 테스트 기능

1. **입력**:
   - 테스트 문자열 (Textarea)
   - 정규식 패턴 또는 라이브러리에서 선택

2. **기능**:
   - 문자열이 패턴과 매칭되는지 확인
   - 매칭된 부분 하이라이팅
   - 모든 매칭 결과 표시 (여러 개일 경우)
   - 캡처 그룹(괄호) 결과 표시

3. **출력**:
   ```
   입력: user@example.com
   패턴: /^[^\s@]+@[^\s@]+\.[^\s@]+$/

   결과: ✅ 매칭됨

   매칭된 텍스트:
   - user@example.com (위치 0-18)

   캡처 그룹:
   - 그룹 1: (없음)
   ```

### 9.3 정규식 설명

1. **패턴 분석**:
   ```
   패턴: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/

   설명:
   ^ : 문자열 시작
   (?=.*[a-z]) : 최소 하나의 소문자 확인 (lookahead)
   (?=.*[A-Z]) : 최소 하나의 대문자 확인
   (?=.*\d) : 최소 하나의 숫자 확인
   .{8,} : 8자 이상의 모든 문자
   $ : 문자열 끝

   의미: 대소문자와 숫자를 포함한 8자 이상의 비밀번호
   ```

2. **규칙 안내**:
   - 메타 문자 설명
   - 예제 값
   - 일반적인 사용 사례

### 9.4 정규식 생성기 (선택사항)

사용자가 정규식을 작성하도록 가이드:

1. **선택식 빌더**:
   ```
   문자 유형 선택:
   ☐ 숫자 ☐ 소문자 ☐ 대문자 ☐ 특수문자

   길이:
   [최소] _____ [최대] _____

   위치:
   ☐ 문자열 시작 ☐ 문자열 끝

   패턴: /^[a-zA-Z0-9_]{8,}$/
   ```

2. **실시간 검증**:
   - 입력한 패턴 검증
   - 문법 오류 표시
   - 테스트 문자열과 함께 즉시 테스트

### 9.5 매칭 유형

1. **test()**: 매칭 여부만 반환 (true/false)
   ```
   /^[a-z]+$/.test('hello') → true
   ```

2. **match()**: 매칭된 문자열과 캡처 그룹 반환
   ```
   'hello123'.match(/\d+/) → ['123']
   ```

3. **exec()**: 위치 정보 포함
   ```
   /\d+/.exec('hello123') → {
     0: '123',
     index: 5,
     input: 'hello123'
   }
   ```

4. **matchAll()**: 모든 매칭 결과 (g 플래그)
   ```
   'a1b2c3'.matchAll(/\d+/g) → [1, 2, 3]
   ```

### 9.6 UI/UX

#### 좌측: 라이브러리
- 카테고리별 정규식 목록:
  - 이메일, 전화번호, 비밀번호 등
  - 검색 필터
- 각 패턴 카드:
  - 패턴명
  - 간단한 설명
  - 정규식 (코드 형식)
  - 클릭 시 테스트 영역에 로드

#### 중앙: 테스트 영역
- **정규식 입력**:
  - 직접 입력 또는 라이브러리에서 선택
  - 플래그 선택 (g, i, m 등)

- **테스트 문자열**:
  - Textarea로 여러 줄 입력 가능
  - 예제 버튼으로 빠른 로드

- **테스트 결과**:
  - ✅ 매칭됨 / ❌ 매칭 안됨
  - 매칭된 부분 하이라이팅
  - 캡처 그룹 정보

#### 우측: 정보 패널
- **패턴 설명**:
  - 각 요소 설명
  - 규칙 안내

- **사용 예제**:
  - 올바른 예
  - 잘못된 예

- **복사 버튼**:
  - 정규식 복사
  - JavaScript 코드 복사
  - Python 코드 복사

#### 버튼
- "테스트"
- "복사" (정규식)
- "복사" (코드)
- "초기화"
- "사용자 정의 패턴 저장" (선택사항)

### 9.7 고급 기능 (선택사항)

1. **다국어 정규식**:
   - 한글, 중국어, 이모지 패턴

2. **성능 테스트**:
   - 정규식 실행 시간 측정
   - 성능 경고 (너무 느린 패턴)

3. **정규식 변환**:
   - PCRE ↔ JavaScript
   - 다른 언어 문법 지원

4. **사용자 정의 저장**:
   - 자신만의 정규식 패턴 저장
   - 즐겨찾기

5. **정규식 설명 생성**:
   - AI로 정규식 설명 자동 생성

---

## 📌 비포함 항목 (Out of Scope)

- 정규식 최적화 (성능 개선 제안)
- 모든 프로그래밍 언어 정규식 지원
- 실시간 협업 기능
- 정규식 학습 튜토리얼 (기초만 포함)

---

## 🎨 디자인 고려사항

- 3열 레이아웃: 라이브러리 | 테스트 | 정보
- 라이브러리 카드로 패턴 시각화
- 매칭된 텍스트는 하이라이팅 (노란색)
- 코드 블록으로 정규식 표시
- 복사 버튼으로 빠른 복사
- 반응형 (모바일에서는 1-2열)

---

## 🔧 기술 고려사항

### 정규식 데이터 구조

```typescript
interface RegexPattern {
  id: string;
  name: string;           // "이메일"
  pattern: string;        // "^[^\s@]+@[^\s@]+\.[^\s@]+$"
  flags?: string;         // "gi" (global, insensitive)
  description: string;    // "기본 이메일 형식"
  category: string;       // "Email", "Password" 등
  examples: {
    valid: string[];      // ["user@example.com"]
    invalid: string[];    // ["invalid.email"]
  };
  explanation: string;    // "각 요소 설명"
  createdAt: Date;
  updatedAt: Date;
}
```

### 정규식 테스트 함수

```typescript
function testRegex(pattern: string, flags: string, testString: string): {
  matches: boolean;
  results: RegExpExecArray[];
  highlightedText: string;
} {
  try {
    const regex = new RegExp(pattern, flags);
    const matches = regex.test(testString);

    // 모든 매칭 결과 추출
    const results: RegExpExecArray[] = [];
    if (flags.includes('g')) {
      let match;
      while ((match = regex.exec(testString)) !== null) {
        results.push(match);
      }
    } else {
      const match = regex.exec(testString);
      if (match) results.push(match);
    }

    // 하이라이팅 텍스트 생성
    const highlightedText = highlightMatches(testString, results);

    return { matches, results, highlightedText };
  } catch (e) {
    throw new Error(`정규식 오류: ${e.message}`);
  }
}
```

### 클라이언트 사이드 처리

- 모든 정규식 테스트는 브라우저에서 실행
- 패턴 데이터는 정적 파일로 로드

---

## 📊 성공 메트릭

1. **라이브러리 커버리지**: 20개 이상의 사전 정의 패턴
2. **테스트 정확도**: 100% 정확한 매칭 결과
3. **응답 속도**: 100ms 이내 테스트 결과 표시
4. **사용성**: 평균 2클릭으로 원하는 패턴 찾기
5. **에러 처리**: 문법 오류 시 명확한 오류 메시지

---

## 🤔 미해결 질문

1. 정규식 최적화 제안(ReDoS 방지) 기능 필요할까?
2. 정규식 학습 튜토리얼을 포함할까?
3. 사용자 정의 패턴 저장 및 공유 기능 필요할까?
4. 다른 프로그래밍 언어(Python, Java 등) 정규식 문법 지원할까?

---

**문서 버전**: 1.0
**마지막 수정**: 2025-11-21
